(()=>{function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(t,n)||e(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if(t){if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var o=document.getElementById("pickerCanvas"),r=o.getContext("2d"),i=document.getElementById("hexText"),a=document.getElementById("rgbText"),c=function(t){return document.getElementById(t)},l=0;function d(t){return t<1||t>5?1:t>2&&t<4?0:t>=4?t-4:t<=2?2-t:void 0}function u(t){return t>=1&&t<3?1:t>4?0:t<1?t:t>=3?4-t:void 0}function f(t){return t>3&&t<=5?1:t<2?0:t<=3?t-2:t>=5?6-t:void 0}var g=function(t,e){return Math.floor(t*e/255)},s=function(t){return Number(t).toString(16).padStart(2,"0")};function h(){for(var t=r.createImageData(256,256),e=t.data,n=0;n<256;n++)for(var o=0;o<256;o++){var i=255-o,a=255-n,c=Math.floor(d(l)*i+(1-d(l))*g(a,i)),s=Math.floor(u(l)*i+(1-u(l))*g(a,i)),h=Math.floor(f(l)*i+(1-f(l))*g(a,i)),m=4*(o*t.width+n);e[m]=c,e[m+1]=s,e[m+2]=h,e[m+3]=255}r.putImageData(t,0,0)}function m(t){l=t,h()}function p(){var e=t((E=w.getBoundingClientRect(),x=o.getBoundingClientRect(),r.getImageData(M(E.left-x.left+E.width/2,x.width-1,0),M(E.top-x.left+E.height/2,x.height-1,0),1,1).data),4),n=e[0],c=e[1],l=e[2];e[3],b.setAttribute("style","background-color: rgb(".concat(n,",").concat(c,",").concat(l,")")),i.textContent="#".concat(s(n)).concat(s(c)).concat(s(l)),a.textContent="".concat(n,", ").concat(c,", ").concat(l)}var v=document.getElementById("rainbowBar").getContext("2d"),b=document.getElementById("currentColour"),y=document.getElementById("slider"),w=document.getElementById("pointer"),C=document.getElementById("channel"),B=C.getBoundingClientRect(),A=y.getBoundingClientRect(),x=o.getBoundingClientRect(),E=w.getBoundingClientRect(),I=!1,S=!1;function R(t,e,n){return t>=0-n&&t<e-n?t:t<0-n?0-n:e-n}function M(t,e,n){return t>e?e:t<n?n:t}function j(e){var n,i,a;if(e?(xpos=e.pageX,n=e.pageY-B.top-A.height/2,i=e.pageX-x.left-E.width/2,a=e.pageY-x.top-E.height/2):(xpos=window.event.x+document.body.scrollLeft-E.width/2,n=window.event.y+document.body.scrollTop-E.height/2),I){E=w.getBoundingClientRect(),x=o.getBoundingClientRect();var c=t(r.getImageData(M(E.left-x.left+E.width/2,x.width-1,0),M(E.top-x.left+E.height/2,x.height-1,0),1,1).data,4),l=c[0],g=c[1],h=c[2];if(c[3],b.setAttribute("style","background-color: rgb(".concat(l,",").concat(g,",").concat(h,")")),n>-7){var v=n+6,C=Math.floor(255*d(6*v/256)),j=Math.floor(255*u(6*v/256)),L=Math.floor(255*f(6*v/256)),O="#"+s(C)+s(j)+s(L);n<=266&&(y.setAttribute("style","top: ".concat(n-1,"px;")),y.setAttribute("fill","".concat(O)),m(n/256*6),p()),n>267-y.getBoundingClientRect().height&&(y.setAttribute("style","top: ".concat(249,"px;")),y.setAttribute("fill","#ff0000"),m(6))}n<=-7&&(y.setAttribute("style","top: ".concat(-7,"px;")),y.setAttribute("fill","#ff0000"),m(6))}S&&(E=w.getBoundingClientRect(),pointerY=R(a,x.height-1,E.height/2),pointerX=R(i,x.width-1,E.width/2),w.setAttribute("style","top: ".concat(pointerY,"px; left: ").concat(pointerX,"px")),p())}y.addEventListener("mousedown",(function(){I=!0})),C.addEventListener("mousedown",(function(){I=!0})),window.addEventListener("mouseup",(function(){I=!1,S=!1})),o.addEventListener("mousedown",(function(){S=!0})),w.addEventListener("mousedown",(function(){S=!0})),window.onmousemove=j,window.onmousedown=j;var L,O=[];chrome&&chrome.storage,window&&window.localStorage&&window.localStorage.getItem("palette")&&(storage=JSON.parse(window.localStorage.getItem("palette")),L=storage,O=function(t){if(Array.isArray(t))return n(t)}(L)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(L)||e(L)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),function(){var t=c("boxRow0"),e=c("boxRow1");for(console.log(t);t.firstChild;)t.removeChild(t.lastChild);for(;e.firstChild;)e.removeChild(e.lastChild);if(O.forEach((function(n,o){var r=document.createElement("div");r.setAttribute("class","smallBox"),r.setAttribute("style","background-color: rgb(".concat(n.r,", ").concat(n.g,", ").concat(n.b,")")),o<6?t.appendChild(r):e.appendChild(r)})),O.length<=6){for(var n=0;n<6-O.length;n++){var o=document.createElement("div");o.setAttribute("class","smallBox"),t.appendChild(o)}for(var r=0;r<6;r++){var i=document.createElement("div");i.setAttribute("class","smallBox"),e.appendChild(i)}}if(O.length>6&&O.length<12)for(var a=0;a<12-O.length;a++){var l=document.createElement("div");l.setAttribute("class","smallBox"),e.appendChild(l)}}(),h(),function(){for(var t=0;t<256;t++){var e=Math.floor(255*d(6*t/255)),n=Math.floor(255*u(6*t/255)),o=Math.floor(255*f(6*t/255)),r="#"+s(e)+s(n)+s(o);v.fillStyle=r,v.fillRect(0,t,16,1)}}(),p()})();